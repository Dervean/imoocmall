<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>ES6</title>
<meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no'/>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
</head>
<body>
    
</body>
<script>
    {
        a = 'some kind happy';
        console.log(`we are ${a}`);
    }
    
    // 数组
    {
        let arr = [1,2,3,4];
        console.log(`original: ${arr}`);
        arr = arr.map((item)=>{
            return item + 1;
        })
        console.log(`map: ${arr}`);
        isum = arr.reduce((item, next_item)=>{
            return item + next_item;
        })
        console.log(`sum: ${isum}`);
    }

    // 解构
    {
        let {x, y} = {x:1, y:2};
        console.log(x, y);
    }
    {
        let [a,b,c] = "ES6";
        console.log(a,b,c);
    }
    
    // rest参数
    {
        function add(...items){
            let isum = 0
            for(let val of items){
                isum += val;
            }
            return isum;
        }
        console.log(add(1,2,3,4,5,6));
        console.log(add(...[1,2,3,4,5,6]));

        console.log(1, ...[1,2,3,4]);

        let a = [1,2,3,4]
        let b = [2,3,4]
        //合并数组
        let arr = [...a, ...b]
        console.log(arr);
    }
    
    // Promise
    {
        function check_login(){
            return new Promise(function(resolve, reject){
                let user = {
                    user_id: 123
                };
                if(user.user_id === 123){
                    resolve({
                        status:0,
                        result:true
                    })
                }
                else{
                    reject("error");
                }
            })
        }

        function get_user_id(){
            return new Promise(function(resolve, reject){
                let user={
                    user_id:123
                };
                resolve(user);
            })
        }

        check_login().then(function(res){
            if(res.status === 0){
                console.log("login success!");
                return get_user_id();
            }
            else{
                console.log("login failed!");
            }
        }).catch(function(error){
            console.log("login error!");
        }).then(function(res2){
            console.log(`user_id: ${res2.user_id}`);
        })

        Promise.all([check_login(), get_user_id()])
        .then(function([res1, res2]){
            console.log(`res1: ${res1.result}`);
            console.log(`res2: ${res2.user_id}`);
        })
    }


</script>
</html>